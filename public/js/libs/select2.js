(function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(j){for(var p=e([0]),m=-1,w=this.length;++m<w&&(p.context=p[0]=this[m])&&!1!==j.call(p[0],m,p););return this}})})(jQuery);
(function(e,j){function p(a,b){for(var c=0,d=b.length;c<d;c+=1)if(m(a,b[c]))return c;return-1}function m(a,b){return a===b?!0:a===j||b===j||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1}function w(a,b){var c,d,k;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(k=c.length;d<k;d+=1)c[d]=e.trim(c[d]);return c}function E(a){a.bind("keydown",function(){e.data(a,"keyup-change-value")===j&&e.data(a,"keyup-change-value",a.val())});a.bind("keyup",function(){var b=
e.data(a,"keyup-change-value");b!==j&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),a.trigger("keyup-change"))})}function F(a,b,c){c=c||j;var d;return function(){var e=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,e)},a)}}function G(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),
b.collapse(!1),b.select()))},0)}function h(a){a.preventDefault();a.stopPropagation()}function z(a,b,c){var d,k=[],g;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){0===this.indexOf("select2-")&&k.push(this)});if(d=b.attr("class"))d=""+d,e(d.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(g=c(this))&&k.push(this)});a.attr("class",k.join(" "))}function H(a,b,c,d){var e=a.toUpperCase().indexOf(b.toUpperCase());b=b.length;0>e?c.push(d(a)):(c.push(d(a.substring(0,e))),c.push("<span class='select2-match'>"),
c.push(d(a.substring(e,e+b))),c.push("</span>"),c.push(d(a.substring(e+b,a.length))))}function I(a){var b,c=0,d=null,k=a.quietMillis||100,g=a.url,n=this;return function(l){window.clearTimeout(b);b=window.setTimeout(function(){var b=c+=1,k=a.data,j=g,f=a.transport||e.ajax,h=a.type||"GET",m={},k=k?k.call(n,l.term,l.page,l.context):null,j="function"===typeof j?j.call(n,l.term,l.page,l.context):j;null!==d&&d.abort();a.params&&(e.isFunction(a.params)?e.extend(m,a.params.call(n)):e.extend(m,a.params));
e.extend(m,{url:j,dataType:a.dataType,data:k,type:h,cache:!1,success:function(d){b<c||(d=a.results(d,l.page),l.callback(d))}});d=f.call(n,m)},k)}}function J(a){var b=a,c,d,k=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();a.text&&(k=a.text,e.isFunction(k)||(c=a.text,k=function(a){return a[c]}));return function(a){var c=a.term,d={results:[]},j;""===c?a.callback(b()):(j=function(b,d){var l,f;b=b[0];if(b.children){l={};for(f in b)b.hasOwnProperty(f)&&
(l[f]=b[f]);l.children=[];e(b.children).each2(function(a,b){j(b,l.children)});(l.children.length||a.matcher(c,k(l),b))&&d.push(l)}else a.matcher(c,k(b),b)&&d.push(b)},e(b().results).each2(function(a,b){j(b,d.results)}),a.callback(d))}}function K(a){var b=e.isFunction(a);return function(c){var d=c.term,k={results:[]};e(b?a():a).each(function(){var a=this.text!==j,b=a?this.text:this;if(""===d||c.matcher(d,b))k.results.push(a?this:{id:this,text:this})});c.callback(k)}}function x(a){if(e.isFunction(a))return!0;
if(!a)return!1;throw Error("formatterName must be a function or a falsy value");}function q(a){return e.isFunction(a)?a():a}function L(a){var b=0;e.each(a,function(a,d){d.children?b+=L(d.children):b++});return b}function N(a,b,c,d){var e=a,g=!1,n,l,f,s;if(!d.createSearchChoice||!d.tokenSeparators||1>d.tokenSeparators.length)return j;for(;;){g=-1;l=0;for(f=d.tokenSeparators.length;l<f&&!(s=d.tokenSeparators[l],g=a.indexOf(s),0<=g);l++);if(0>g)break;n=a.substring(0,g);a=a.substring(g+s.length);if(0<
n.length&&(n=d.createSearchChoice(n,b),n!==j&&null!==n&&d.id(n)!==j&&null!==d.id(n))){g=!1;l=0;for(f=b.length;l<f;l++)if(m(d.id(n),d.id(b[l]))){g=!0;break}g||c(n)}}if(e!==a)return a}function A(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c}if(window.Select2===j){var f,u,B,C,y,v,M,D;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,
END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};u=e(document);var O=1;y=function(){return O++};u.bind("mousemove",function(a){M={x:a.pageX,y:a.pageY}});u=A(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},
init:function(a){var b,c;this.opts=a=this.prepareOpts(a);this.id=a.id;a.element.data("select2")!==j&&null!==a.element.data("select2")&&this.destroy();this.enabled=!0;this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+y());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,k;this.body=function(){!1===d&&(k=a.element.closest("body"),d=!0);return k};z(this.container,
this.opts.element,this.opts.adaptContainerCssClass);this.container.css(q(a.containerCss));this.container.addClass(q(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).bind("focus.select2",function(){e(this).select2("focus")}).attr("tabindex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(q(a.dropdownCssClass));this.dropdown.data("select2",this);
this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=0;this.context=null;this.initContainer();this.results.bind("mousemove",function(a){var b=M;(b===j||b.x!==a.pageX||b.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.delegate(".select2-results","mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent));var g=this.results,n=F(80,function(a){g.trigger("scroll-debounced",
a)});g.bind("scroll",function(a){0<=p(a.target,g.get())&&n(a)});this.dropdown.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded));e(this.container).delegate(".select2-input","change",function(a){a.stopPropagation()});e(this.dropdown).delegate(".select2-input","change",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,d,e){c=b.scrollTop();0<e&&0>=c-e?(b.scrollTop(0),h(a)):0>e&&b.get(0).scrollHeight-b.scrollTop()+e<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-
b.height()),h(a))});E(c);c.bind("keyup-change input paste",this.bind(this.updateResults));c.bind("focus",function(){c.addClass("select2-focused")});c.bind("blur",function(){c.removeClass("select2-focused")});this.dropdown.delegate(".select2-results","mouseup",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.bind("click mouseup mousedown",function(a){a.stopPropagation()});e.isFunction(this.opts.initSelection)&&
(this.initSelection(),this.monitorSource());(a.element.is(":disabled")||a.element.is("[readonly='readonly']"))&&this.disable();var l;if(!(l=D)){l=e("<div class='select2-measure-scrollbar'></div>");l.appendTo("body");var f={width:l.width()-l[0].clientWidth,height:l.height()-l[0].clientHeight};l.remove();l=f}D=l},destroy:function(){var a=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);a!==j&&(a.container.remove(),a.dropdown.remove(),
a.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabindex:this.elementTabIndex}).show())},optionToData:function(a){if(a.is("option"))return{id:a.attr("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:m(a.attr("disabled"),"disabled"),locked:m(a.attr("locked"),"locked")};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,k=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&
(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,s=this.opts.id;f=function(b,c,g){var n,m,h,p,q,t,r;b=a.sortResults(b,c,d);n=0;for(m=b.length;n<m;n+=1)h=b[n],q=!0===h.disabled,p=!q&&s(h)!==j,t=h.children&&0<h.children.length,r=e("<li></li>"),r.addClass("select2-results-dept-"+
g),r.addClass("select2-result"),r.addClass(p?"select2-result-selectable":"select2-result-unselectable"),q&&r.addClass("select2-disabled"),t&&r.addClass("select2-result-with-children"),r.addClass(k.opts.formatResultCssClass(h)),p=e(document.createElement("div")),p.addClass("select2-result-label"),q=a.formatResult(h,p,d,k.opts.escapeMarkup),q!==j&&p.html(q),r.append(p),t&&(t=e("<ul></ul>"),t.addClass("select2-result-sub"),f(h.children,t,g+1),r.append(t)),r.data("select2-data",h),c.append(r)};f(c,b,
0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(e.isArray(a.element.data("select2Tags"))){if("tags"in a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c={results:[],more:!1},d=a.term,f,s,h;h=function(b,c){var e;b.is("option")?a.matcher(d,b.text(),b)&&c.push(k.optionToData(b)):b.is("optgroup")&&(e=k.optionToData(b),
b.children().each2(function(a,b){h(b,e.children)}),0<e.children.length&&c.push(e))};f=b.children();this.getPlaceholder()!==j&&0<f.length&&(s=f[0],""===e(s).text()&&(f=f.not(s)));f.each2(function(a,b){h(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<c.length)a.ajax.url=c;a.query=I.call(a.element,a.ajax)}else"data"in a?a.query=J(a.data):"tags"in a&&(a.query=K(a.tags),
a.createSearchChoice===j&&(a.createSearchChoice=function(a){return{id:a,text:a}}),a.initSelection===j&&(a.initSelection=function(b,c){var d=[];e(w(b.val(),a.separator)).each(function(){var b=this,c=this,k=a.tags;e.isFunction(k)&&(k=k());e(k).each(function(){if(m(this.id,b))return c=this.text,!1});d.push({id:b,text:c})});c(d)}));if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b;a.bind("change.select2",
this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}));b=this.bind(function(){var a,b;a="disabled"!==this.opts.element.attr("disabled");b="readonly"===this.opts.element.attr("readonly");a=a&&!b;this.enabled!==a&&(a?this.enable():this.disable());z(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(q(this.opts.containerCssClass));z(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(q(this.opts.dropdownCssClass))});
a.bind("propertychange.select2 DOMAttrModified.select2",b);"undefined"!==typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(a){a.forEach(b)}),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=e.Event("selected",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=
e.extend({},a,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),
this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),k=a.outerHeight(!1),g=e(window).scrollLeft()+e(window).width(),f=e(window).scrollTop()+e(window).height(),c=b.top+c,l=b.left,f=c+k<=f,j=b.top-k>=this.body().scrollTop(),h=a.outerWidth(!1),m=l+h<=g,p=a.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?
(h=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),h=a.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:D.width),h>d?d=h:h=d,m=l+h<=g):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(g=this.body().offset(),c-=g.top,l-=g.left);p?(g=!0,!j&&f&&(g=!1)):(g=!1,!f&&j&&(g=!0));m||(l=b.left+d-h);g?(c=b.top-k,this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),
a.removeClass("select2-drop-above"));b=e.extend({top:c,left:l,width:d},q(this.opts.dropdownCss));a.css(b)},shouldOpen:function(){var a;if(this.opened())return!1;a=e.Event("opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;window.setTimeout(this.bind(this.opening),1);return!0},opening:function(){function a(){return{width:Math.max(document.documentElement.scrollWidth,
e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var b=this.containerId,c="scroll."+b,d="resize."+b,k="orientationchange."+b;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());b=e("#select2-drop-mask");0==b.length&&(b=e(document.createElement("div")),b.attr("id","select2-drop-mask").attr("class",
"select2-drop-mask"),b.hide(),b.appendTo(this.body()),b.bind("mousedown touchstart",function(){var a=e("#select2-drop");0<a.length&&(a=a.data("select2"),a.opts.selectOnBlur&&a.selectHighlighted({noFocus:!0}),a.close())}));this.dropdown.prev()[0]!==b[0]&&this.dropdown.before(b);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");b.css(a());b.show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();var g=
this;this.container.parents().add(window).each(function(){e(this).bind(d+" "+c+" "+k,function(){e("#select2-drop-mask").css(a());g.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.parents().add(window).each(function(){e(this).unbind(b).unbind(c).unbind(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open");
this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return q(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,k;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),k=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),0<
b.length&&(k=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),k>b&&a.scrollTop(a.scrollTop()+(k-b)),k=d.offset().top-a.offset().top,0>k&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+k)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){var c=c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&
!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=this.findHighlightableChoices();if(0===arguments.length)return p(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.results.find(".select2-highlighted").removeClass("select2-highlighted");b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"highlight",val:this.id(b),
choice:b})},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,g=this.search.val(),
f=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:g,page:d,context:f,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:g,page:d,context:f}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),
e.positionDropdown(),e.resultsPage=d,e.context=c.context)})})))},tokenize:function(){},updateResults:function(a){function b(){k.scrollTop(0);d.removeClass("select2-active");l.positionDropdown()}function c(a){k.html(a);b()}var d=this.search,k=this.results,g=this.opts,f,l=this;f=d.val();var h=e.data(this.container,"select2-last-term");if(!(!0!==a&&h&&m(f,h))&&(e.data(this.container,"select2-last-term",f),!(!0!==a&&(!1===this.showSearchInput||!this.opened())))){h=this.getMaximumSelectionSize();if(1<=
h&&(f=this.data(),e.isArray(f)&&f.length>=h&&x(g.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+g.formatSelectionTooBig(h)+"</li>");return}d.val().length<g.minimumInputLength?x(g.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+g.formatInputTooShort(d.val(),g.minimumInputLength)+"</li>"):c(""):g.maximumInputLength&&d.val().length>g.maximumInputLength?x(g.formatInputTooLong,"formatInputTooLong")?c("<li class='select2-no-results'>"+
g.formatInputTooLong(d.val(),g.maximumInputLength)+"</li>"):c(""):(g.formatSearching&&0===this.findHighlightableChoices().length&&c("<li class='select2-searching'>"+g.formatSearching()+"</li>"),d.addClass("select2-active"),f=this.tokenize(),f!=j&&null!=f&&d.val(f),this.resultsPage=1,g.query({element:g.element,term:d.val(),page:this.resultsPage,context:null,matcher:g.matcher,callback:this.bind(function(f){var h;this.opened()?(this.context=f.context===j?null:f.context,this.opts.createSearchChoice&&
""!==d.val()&&(h=this.opts.createSearchChoice.call(null,d.val(),f.results),h!==j&&null!==h&&l.id(h)!==j&&null!==l.id(h)&&0===e(f.results).filter(function(){return m(l.id(this),l.id(h))}).length&&f.results.unshift(h)),0===f.results.length&&x(g.formatNoMatches,"formatNoMatches")?c("<li class='select2-no-results'>"+g.formatNoMatches(d.val())+"</li>"):(k.empty(),l.opts.populateResults.call(this,k,f.results,{term:d.val(),page:this.resultsPage,context:null}),!0===f.more&&x(g.formatLoadMore,"formatLoadMore")&&
(k.append("<li class='select2-more-results'>"+l.opts.escapeMarkup(g.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){l.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"loaded",data:f}))):this.search.removeClass("select2-active")})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&
this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){G(this.search)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c&&(this.highlight(b),this.onSelect(c,a))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||
this.opts.placeholder},initContainerWidth:function(){var a=function(){var a,c,d,f;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){a=this.opts.element.attr("style");if(a!==j){a=a.split(";");d=0;for(f=a.length;d<f;d+=1)if(c=a[d].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==c&&1<=c.length)return c[1]}return(a=
this.opts.element.css("width"))&&0<a.length?a:"resolve"===this.opts.width?0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==a&&this.container.css("width",a)}});B=A(u,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>   <span>&nbsp;</span><abbr class='select2-search-choice-close select2-display-none'></abbr>   <div><b></b></div></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();this.focusser.attr("disabled","disabled").val("");this.updateResults(!0);this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&
(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),G(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},initContainer:function(){var a,b=this.container,c=this.dropdown;this.showSearch(0<=this.opts.minimumResultsForSearch);
this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id","s2id_autogen"+y());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.bind("keydown",this.bind(function(a){if(this.enabled)if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)h(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);h(a);break;case f.TAB:case f.ENTER:this.selectHighlighted();
h(a);break;case f.ESC:this.cancel(a),h(a)}}));this.search.bind("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.bind("keydown",this.bind(function(a){if(this.enabled&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(!1===this.opts.openOnEnter&&a.which===f.ENTER)h(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)this.open(),h(a);else if(a.which==
f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),h(a)}));E(this.focusser);this.focusser.bind("keyup-change input",this.bind(function(a){a.stopPropagation();this.opened()||this.open()}));a.delegate("abbr","mousedown",this.bind(function(a){this.enabled&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.bind("mousedown",this.bind(function(a){this.opened()?this.close():this.enabled&&this.open();h(a)}));c.bind("mousedown",this.bind(function(){this.search.focus()}));
a.bind("focus",this.bind(function(a){h(a)}));this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")}));this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");
b&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.updateSelection([]),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==j&&null!==b&&(a.updateSelection(b),
a.close(),a.setPlaceholder())})}},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=a.find(":selected");d(b.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var f=b.val(),g=null;a.query({matcher:function(b,c,d){(b=m(f,a.id(d)))&&(g=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(g)}})});return a},getPlaceholder:function(){return this.select&&
""!==this.select.find("option").first().text()?j:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();""===this.opts.element.val()&&a!==j&&!(this.select&&""!==this.select.find("option:first").text())&&(this.selection.find("span").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"),this.selection.find("abbr").hide())},postprocessResults:function(a,b,c){var d=0,e=this,f=!0;this.findHighlightableChoices().each2(function(a,
b){if(m(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&this.highlight(d);!0===b&&(b=this.opts.minimumResultsForSearch,f=0>b?!1:L(a.results)>=b,this.showSearch(f))},showSearch:function(a){this.showSearchInput=a;this.dropdown.find(".select2-search")[a?"removeClass":"addClass"]("select2-search-hidden");e(this.dropdown,this.container)[a?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();
this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"selected",val:this.id(a),choice:a});this.close();(!b||!b.noFocus)&&this.selection.focus();m(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find("span");this.selection.data("select2-data",a);b.empty();a=this.opts.formatSelection(a,b);a!==j&&b.append(this.opts.escapeMarkup(a));this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==
j&&(this.container.addClass("select2-allowclear"),this.selection.find("abbr").show())},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(0===arguments.length)return this.opts.element.val();a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find(":selected").each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else{if(this.opts.initSelection===j)throw Error("cannot call val() if initSelection() is not defined");
!a&&0!==a?this.clear(b):(this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})}))}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a,b){var c;if(0===arguments.length)return c=this.selection.data("select2-data"),c==j&&(c=null),c;!a||""===a?this.clear(b):(c=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),
b&&this.triggerChange({added:a,removed:c}))}});C=A(u,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("    <ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,
arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=[];a.find(":selected").each2(function(a,c){e.push(b.optionToData(c))});d(e)}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var f=w(b.val(),a.separator),g=[];a.query({matcher:function(b,c,d){(b=e.grep(f,function(b){return m(b,a.id(d))}).length)&&g.push(d);return b},callback:!e.isFunction(d)?e.noop:function(){d(g)}})});return a},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");
this.selection=a=this.container.find(".select2-choices");this.search.attr("id","s2id_autogen"+y());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id"));this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.search.bind("keydown",this.bind(function(b){if(this.enabled){if(b.which===f.BACKSPACE&&""===this.search.val()){this.close();var c;c=a.find(".select2-search-choice-focus");
if(0<c.length){this.unselect(c.first());this.search.width(10);h(b);return}c=a.find(".select2-search-choice:not(.select2-locked)");0<c.length&&c.last().addClass("select2-search-choice-focus")}else a.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);h(b);return;case f.ENTER:case f.TAB:this.selectHighlighted();h(b);return;case f.ESC:this.cancel(b);h(b);return}b.which===f.TAB||
f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&h(b),b.which===f.ENTER&&h(b))}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(a){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.opened()||this.clearSearch();a.stopImmediatePropagation()}));this.container.delegate(".select2-choices","mousedown",this.bind(function(a){this.enabled&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.clearPlaceholder(),this.open(),this.focusSearch(),a.preventDefault())}));this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));
this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=
this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==j&&null!==b&&(a.updateSelection(b),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();a!==j&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},
opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>p(d.id(this),b)&&(b.push(d.id(this)),
c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer(a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&a!=j&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&
this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),
d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),c=b?c:d,d=this.id(a),f=this.getVal(),g;g=this.opts.formatSelection(a,c.find("div"));g!=j&&c.find("div").replaceWith("<div>"+this.opts.escapeMarkup(g)+"</div>");b&&c.find(".select2-search-choice-close").bind("mousedown",h).bind("click dblclick",this.bind(function(a){this.enabled&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.close();this.focusSearch()})).dequeue(),h(a))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d;a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data"))d=p(this.id(c),b),
0<=d&&(b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults()),a.remove(),this.opts.element.trigger({type:"removed",val:this.id(c),choice:c}),this.triggerChange({removed:c})},postprocessResults:function(){var a=this.getVal(),b=this.results.find(".select2-result"),c=this.results.find(".select2-result-with-children"),d=this;b.each2(function(b,c){var e=d.id(c.data("select2-data"));0<=p(e,a)&&(c.addClass("select2-selected"),c.find(".select2-result-selectable").addClass("select2-selected"))});
c.each2(function(a,b){!b.is(".select2-result-selectable")&&0===b.find(".select2-result-selectable:not(.select2-selected)").length&&b.addClass("select2-selected")});-1==this.highlight()&&d.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;v||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),v=e(document.createElement("div")).css({position:"absolute",
left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),v.attr("class","select2-sizer"),e("body").append(v));v.text(a.val());a=v.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);0>=b&&(b=a);this.search.width(b)},getVal:function(){var a;if(this.select)return a=
this.select.val(),null===a?[]:a;a=this.opts.element.val();return w(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){0>p(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){b=b.slice(0);a=a.slice(0);for(var c=0;c<b.length;c++)for(var d=0;d<a.length;d++)m(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,
b){var c,d=this;if(0===arguments.length)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&0!==a)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(this.opts.initSelection===j)throw Error("val() cannot be called if initSelection() is not defined");
this.opts.initSelection(this.opts.element,function(a){var f=e(a).map(d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(this.buildChangeDetails(c,this.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());
this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();f=this.data();a||(a=[]);d=e.map(a,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(f,
this.data()))}});e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,g="val destroy opened open close focus isFocused container onSortStart onSortEnd enable disable positionDropdown data".split(" ");this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?f=b.element.attr("multiple"):(f=b.multiple||!1,"tags"in b&&(b.multiple=f=!0)),c=f?new C:new B,c.init(b);else if("string"===
typeof a[0]){if(0>p(a[0],g))throw"Unknown method: "+a[0];d=j;c=e(this).data("select2");if(c!==j&&(d="container"===a[0]?c.container:c[a[0]].apply(c,a.slice(1)),d!==j))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return d===j?this:d};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];H(a.text,c.term,b,d);return b.join("")},formatSelection:function(a){return a?
a.text:j},sortResults:function(a){return a},formatResultCssClass:function(){return j},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},
minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=(""+b).toUpperCase().indexOf((""+a).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:N,escapeMarkup:function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},
adaptDropdownCssClass:function(){return null}};window.Select2={query:{ajax:I,local:J,tags:K},util:{debounce:F,markMatch:H},"class":{"abstract":u,single:B,multi:C}}}})(jQuery);

define();